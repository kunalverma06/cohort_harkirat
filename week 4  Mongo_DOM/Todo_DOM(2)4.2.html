<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>

        function addchild(title, description, buttonid) {
            const outerdiv = document.createElement("div");//create a div
            const titlediv = document.createElement("div");//create a  inner div title
            titlediv.innerHTML = title;//give value of title to the inner div title

            const descriptiondiv = document.createElement("div");//creating a inner div descripiton
            descriptiondiv.innerHTML = description;//give value of description to the inner div description

            const button = document.createElement("button");//creating a button
            button.innerHTML = "mark as done";//give value to the button

            button.setAttribute("onclick", `done(${buttonid})`);//set attribute to the button
            //on click  //call the function done with the buttonid

            outerdiv.appendChild(titlediv);//append the inner div title to the outer div
            outerdiv.appendChild(descriptiondiv);//append the inner div description to the outer div
            outerdiv.appendChild(button);//append the button to the outer div
            outerdiv.setAttribute("id", buttonid);//set attribute to the outer div
            return (outerdiv);
        }
        // In JavaScript,
        //  state refers to the data stored in the application at a given moment

        //state rules based on we need to create update fucntion
        //state will be an array
        //state will take title and description id


        function updatetod(state) {
            const parent=document.getElementById("adding");

            for(let i=0;i<state.length;i++){
                parent.appendChild(addchild(state[i].title,state[i].description,state[i].id))
            }

        }

        window.setInterval(async function(){
            const response=await fetch("https://sum-server.100xdevs.com/todos");
            const data= await response.json();
            updatetod(data.todos);
        },5000)
    </script>
</head>

<body>
    <input id="todo" placeholder="title" type="text"></input><br><br>
    <input id="description" placeholder="description" type="text"></input><br><br>
    <!-- <button onclick="addtodo()">Add tasks</button> -->
    <div id="adding"></div>
</body>

</html>